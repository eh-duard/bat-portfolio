---
// Componente helper per gestire i due stati del contenuto
interface Props {
  as?: string;
  className?: string;
}

const { as: Element = 'div', className = '' } = Astro.props;
---

<Element class={`dual-content-wrapper ${className}`}>
  <div class="mode-content mode-dev hidden-mode">
    <slot name="dev" />
  </div>
  <div class="mode-content mode-batman hidden-mode">
    <slot name="batman" />
  </div>
</Element>

<script>
  import { modeStore } from '../stores/gameStore';

  const wrappers = document.querySelectorAll('.dual-content-wrapper');

  wrappers.forEach(wrapper => {
    const devContent = wrapper.querySelector('.mode-dev');
    const batmanContent = wrapper.querySelector('.mode-batman');

    modeStore.subscribe(mode => {
        // Toggle classes based on mode
        if (mode === 'dev') {
            devContent?.classList.remove('hidden-mode');
            devContent?.classList.add('visible-mode');
            batmanContent?.classList.add('hidden-mode');
            batmanContent?.classList.remove('visible-mode');
        } else {
            batmanContent?.classList.remove('hidden-mode');
            batmanContent?.classList.add('visible-mode');
            devContent?.classList.add('hidden-mode');
            devContent?.classList.remove('visible-mode');
        }
    });
  });
</script>

<style>
  .hidden-mode {
    display: none !important;
    opacity: 0;
  }
  
  .visible-mode {
    display: block !important;
    opacity: 1;
    animation: fadeInMode 0.5s ease-out;
  }

  @keyframes fadeInMode {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
